---
- name: enable eigrp4 rid
  ios_config:
    parents: router eigrp {{ ipv4routing.as }}
    lines:
      - router-id {{ ipv4routing.rid }}
- name: enable eigrp4 passive-interface
  ios_config:
    parents: router eigrp {{ ipv4routing.as }}
    lines:
      - passive-interface {{ item }}
  with_items:
      - "{{ ipv4routing.passive }}"
  when: ipv4routing.passive is defined
- name: enable eigrp ipv4 on interfaces
  ios_config:
    parents: interface {{ item.id }}
    lines:
      - ip eigrp {{ ipv4routing.as }}
  with_items:
      - "{{ eigrp4 }}"
